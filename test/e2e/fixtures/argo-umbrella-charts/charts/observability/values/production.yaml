# Observability stack - production environment overrides

# grafana production overrides
grafana:
  replicas: 3

  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      memory: 1Gi

  persistence:
    enabled: true
    size: 10Gi

  # Use external secret management in production
  admin:
    existingSecret: grafana-admin-credentials
    userKey: admin-user
    passwordKey: admin-password

  podDisruptionBudget:
    minAvailable: 1

# loki production overrides
loki:
  deploymentMode: SimpleScalable

  loki:
    commonConfig:
      replication_factor: 3
    storage:
      type: s3
      s3:
        endpoint: s3.amazonaws.com
        region: us-west-2
        bucketNames:
          chunks: prod-loki-chunks
          ruler: prod-loki-ruler
          admin: prod-loki-admin

  read:
    replicas: 3
    resources:
      requests:
        cpu: 100m
        memory: 512Mi
      limits:
        memory: 1Gi

  write:
    replicas: 3
    resources:
      requests:
        cpu: 100m
        memory: 512Mi
      limits:
        memory: 1Gi

  backend:
    replicas: 3
    resources:
      requests:
        cpu: 100m
        memory: 512Mi
      limits:
        memory: 1Gi

  singleBinary:
    replicas: 0

  gateway:
    replicas: 3

# alloy production overrides
alloy:
  controller:
    type: daemonset
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        memory: 1Gi

# tempo production overrides
tempo:
  tempo:
    retention: 168h

  resources:
    requests:
      cpu: 200m
      memory: 1Gi
    limits:
      memory: 2Gi

  persistence:
    enabled: true
    size: 50Gi
